<!doctype html><html lang=zh><head><title>cloud</title>
<meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><link rel=stylesheet href=/application.fb9df7e952c9dccf496d00faec07de633aae460f909bbba4b5e0ad22f5887d73.css integrity="sha256-+5336VLJ3M9JbQD67AfeYzquRg+Qm7ukteCtIvWIfXM="><link rel=icon type=image/png href=/images/site/favicon_hu3d2f89ed4395f8e4a11f46415bebb510_10034_42x0_resize_box_3.png><meta property="og:title" content="cloud"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="/zh/tags/cloud/"><script src=https://cdn.counter.dev/script.js data-id=2905461c-37df-49f9-a4ca-0ea1ba64543a data-utcoffset=1></script></head><body class="type-tags kind-term" data-spy=scroll data-target=#TableOfContents data-offset=80><div class="container-fluid bg-dimmed wrapper"><nav class="navbar navbar-expand-xl top-navbar final-navbar shadow"><div class=container><button class="navbar-toggler navbar-light" id=sidebar-toggler type=button>
<span class=navbar-toggler-icon></span>
</button>
<a class=navbar-brand href=/zh/><img src=/images/site/main-logo_hu69a4da50b288ac7c5f97b1e1012a418e_8650_42x0_resize_box_3.png alt=Logo>
Mengz's Space ...</a>
<button class="navbar-toggler navbar-light" id=toc-toggler type=button>
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse lang-selector" id=top-nav-items><ul class="navbar-nav ml-auto"><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=themeSelector role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false><img id=navbar-theme-icon-svg src=/icons/moon-svgrepo-com.svg width=20 alt="Dark Theme"></a><div id=themeMenu class="dropdown-menu dropdown-menu-icons-only" aria-labelledby=themeSelector><a class="dropdown-item nav-link" href=# data-scheme=light><img class=menu-icon-center src=/icons/sun-svgrepo-com.svg width=20 alt="Light Theme">
</a><a class="dropdown-item nav-link" href=# data-scheme=dark><img class=menu-icon-center src=/icons/moon-svgrepo-com.svg width=20 alt="Dark Theme">
</a><a class="dropdown-item nav-link" href=# data-scheme=system><img class=menu-icon-center src=/icons/computer-svgrepo-com.svg width=20 alt="System Theme"></a></div></li></ul></div></div><img src=/images/site/main-logo_hu69a4da50b288ac7c5f97b1e1012a418e_8650_42x0_resize_box_3.png class=d-none id=main-logo alt=Logo>
<img src=/images/site/inverted-logo_hu3d2f89ed4395f8e4a11f46415bebb510_10034_42x0_resize_box_3.png class=d-none id=inverted-logo alt="Inverted Logo"></nav><section class=sidebar-section id=sidebar-section><div class=sidebar-holder><div class=sidebar id=sidebar><form class=mx-auto method=get action=/zh/search><input type=text name=keyword placeholder=Search data-search id=search-box></form><div class=sidebar-tree><ul class=tree id=tree><li id=list-heading><a href=/zh/tags data-filter=all>Tags</a></li><div class="subtree taxonomy-terms"><li><a class=taxonomy-term href=/zh/tags/algorithm/ data-taxonomy-term=algorithm><span class=taxonomy-label>algorithm</span></a></li><li><a class=taxonomy-term href=/zh/tags/ansible/ data-taxonomy-term=ansible><span class=taxonomy-label>ansible</span></a></li><li><a class=taxonomy-term href=/zh/tags/aws/ data-taxonomy-term=aws><span class=taxonomy-label>aws</span></a></li><li><a class=taxonomy-term href=/zh/tags/cicd/ data-taxonomy-term=cicd><span class=taxonomy-label>cicd</span></a></li><li><a class="taxonomy-term active" href=/zh/tags/cloud/ data-taxonomy-term=cloud><span class=taxonomy-label>cloud</span></a></li><li><a class=taxonomy-term href=/zh/tags/cluster/ data-taxonomy-term=cluster><span class=taxonomy-label>cluster</span></a></li><li><a class=taxonomy-term href=/zh/tags/cncf/ data-taxonomy-term=cncf><span class=taxonomy-label>cncf</span></a></li><li><a class=taxonomy-term href=/zh/tags/command/ data-taxonomy-term=command><span class=taxonomy-label>command</span></a></li><li><a class=taxonomy-term href=/zh/tags/compose/ data-taxonomy-term=compose><span class=taxonomy-label>compose</span></a></li><li><a class=taxonomy-term href=/zh/tags/contianer/ data-taxonomy-term=contianer><span class=taxonomy-label>contianer</span></a></li><li><a class=taxonomy-term href=/zh/tags/cotainer/ data-taxonomy-term=cotainer><span class=taxonomy-label>cotainer</span></a></li><li><a class=taxonomy-term href=/zh/tags/cpp/ data-taxonomy-term=cpp><span class=taxonomy-label>cpp</span></a></li><li><a class=taxonomy-term href=/zh/tags/crontab/ data-taxonomy-term=crontab><span class=taxonomy-label>crontab</span></a></li><li><a class=taxonomy-term href=/zh/tags/debug/ data-taxonomy-term=debug><span class=taxonomy-label>debug</span></a></li><li><a class=taxonomy-term href=/zh/tags/docker/ data-taxonomy-term=docker><span class=taxonomy-label>docker</span></a></li><li><a class=taxonomy-term href=/zh/tags/find/ data-taxonomy-term=find><span class=taxonomy-label>find</span></a></li><li><a class=taxonomy-term href=/zh/tags/github/ data-taxonomy-term=github><span class=taxonomy-label>github</span></a></li><li><a class=taxonomy-term href=/zh/tags/gitlab/ data-taxonomy-term=gitlab><span class=taxonomy-label>gitlab</span></a></li><li><a class=taxonomy-term href=/zh/tags/gitops/ data-taxonomy-term=gitops><span class=taxonomy-label>gitops</span></a></li><li><a class=taxonomy-term href=/zh/tags/hardware/ data-taxonomy-term=hardware><span class=taxonomy-label>hardware</span></a></li><li><a class=taxonomy-term href=/zh/tags/hostname/ data-taxonomy-term=hostname><span class=taxonomy-label>hostname</span></a></li><li><a class=taxonomy-term href=/zh/tags/k3s/ data-taxonomy-term=k3s><span class=taxonomy-label>k3s</span></a></li><li><a class=taxonomy-term href=/zh/tags/kernel/ data-taxonomy-term=kernel><span class=taxonomy-label>kernel</span></a></li><li><a class=taxonomy-term href=/zh/tags/kubectl/ data-taxonomy-term=kubectl><span class=taxonomy-label>kubectl</span></a></li><li><a class=taxonomy-term href=/zh/tags/kubernetes/ data-taxonomy-term=kubernetes><span class=taxonomy-label>kubernetes</span></a></li><li><a class=taxonomy-term href=/zh/tags/linux/ data-taxonomy-term=linux><span class=taxonomy-label>linux</span></a></li><li><a class=taxonomy-term href=/zh/tags/mariadb/ data-taxonomy-term=mariadb><span class=taxonomy-label>mariadb</span></a></li><li><a class=taxonomy-term href=/zh/tags/mqtt/ data-taxonomy-term=mqtt><span class=taxonomy-label>mqtt</span></a></li><li><a class=taxonomy-term href=/zh/tags/network/ data-taxonomy-term=network><span class=taxonomy-label>network</span></a></li><li><a class=taxonomy-term href=/zh/tags/nvidia/ data-taxonomy-term=nvidia><span class=taxonomy-label>nvidia</span></a></li><li><a class=taxonomy-term href=/zh/tags/opensuse/ data-taxonomy-term=opensuse><span class=taxonomy-label>opensuse</span></a></li><li><a class=taxonomy-term href=/zh/tags/rclone/ data-taxonomy-term=rclone><span class=taxonomy-label>rclone</span></a></li><li><a class=taxonomy-term href=/zh/tags/sbom/ data-taxonomy-term=sbom><span class=taxonomy-label>sbom</span></a></li><li><a class=taxonomy-term href=/zh/tags/security/ data-taxonomy-term=security><span class=taxonomy-label>security</span></a></li><li><a class=taxonomy-term href=/zh/tags/shell/ data-taxonomy-term=shell><span class=taxonomy-label>shell</span></a></li><li><a class=taxonomy-term href=/zh/tags/slack/ data-taxonomy-term=slack><span class=taxonomy-label>slack</span></a></li><li><a class=taxonomy-term href=/zh/tags/systemd/ data-taxonomy-term=systemd><span class=taxonomy-label>systemd</span></a></li><li><a class=taxonomy-term href=/zh/tags/terraform/ data-taxonomy-term=terraform><span class=taxonomy-label>terraform</span></a></li><li><a class=taxonomy-term href=/zh/tags/terrafrom/ data-taxonomy-term=terrafrom><span class=taxonomy-label>terrafrom</span></a></li><li><a class=taxonomy-term href=/zh/tags/ubuntu/ data-taxonomy-term=ubuntu><span class=taxonomy-label>ubuntu</span></a></li><li><a class=taxonomy-term href=/zh/tags/virtualization/ data-taxonomy-term=virtualization><span class=taxonomy-label>virtualization</span></a></li><li><a class=taxonomy-term href=/zh/tags/vpn/ data-taxonomy-term=vpn><span class=taxonomy-label>vpn</span></a></li><li><a class=taxonomy-term href=/zh/tags/web/ data-taxonomy-term=web><span class=taxonomy-label>web</span></a></li><li><a class=taxonomy-term href=/zh/tags/wechat/ data-taxonomy-term=wechat><span class=taxonomy-label>wechat</span></a></li><li><a class=taxonomy-term href=/zh/tags/windows/ data-taxonomy-term=windows><span class=taxonomy-label>windows</span></a></li><li><a class=taxonomy-term href=/zh/tags/wireguard/ data-taxonomy-term=wireguard><span class=taxonomy-label>wireguard</span></a></li><li><a class=taxonomy-term href=/zh/tags/wsl/ data-taxonomy-term=wsl><span class=taxonomy-label>wsl</span></a></li><li><a class=taxonomy-term href=/zh/tags/zypper/ data-taxonomy-term=zypper><span class=taxonomy-label>zypper</span></a></li></div></ul></div></div></div></section><section class=content-section id=content-section><div class="content container-fluid" id=content><div class="container-fluid post-card-holder" id=post-card-holder><div class=post-card><a href=/zh/posts/devops/tf-cloud/ class=post-card-link><div class=card><div class=card-head><img class=card-img-top src=/zh/posts/devops/tf-cloud/tf-cloud.webp alt="Hero Image"></div><div class=card-body><h5 class=card-title>迁移本地项目到TF CLOUD</h5><p class="card-text post-summary">之前文章我们尝试了在本地环境使用Terraform来创建和管理AWS Lightsail资源，对于管理一些云资源，我们需要在本地安装相应的CLI工具和配置访问相应云资源的凭据（例如AWS CLI， AccessKeyID等），Terraform通过调用本地的CLI工具或者云API来管理云资源的状态，其默认使用的是local类型的Backend，资源的状态文件(.tfstate)也是保存在本地文件目录中的。
这篇文章我们将尝试使用remote类型的Backend，将项目迁移到Terraform Cloud去执行，并且由Terraform Cloud来管理资源状态。
什么是Terraform Cloud Terraform Cloud 是一个管理Terraform在一致且可靠的环境中运行的SaaS应用，从而可以替换在本地机器是执行Terraform项目，其存储共享的状态和机密数据，并可以连接到版本控制系统（如 Git)，使得我们可以在团队中将基础设施作为代码进行工作。
Terraform是一个商业应用，团队和商业使用将会收取费用并提供了更多的高级功能。但对于个人用户，可以免费使用基本的功能。关于费用和功能详情，可以参考 (https://www.hashicorp.com/products/terraform/pricing)。
首先我们需要注册一个Terraform Cloud的账号，访问 https://app.terraform.io/public/signup/account ，根据提示注册账号
注册完成后第一次登陆Terraform Cloud，其会询问如何开始一个项目，这里我们选择 Start from scratch，也就是将从一个空模板开始
接下来我们需要创建一个组织（Organization），例如这里我创建一个名为 learn-terraform 的组织，一个组织就类似要给命名空间，可以管理多个工作空间（Workspace），还可以管理其下工作空间共享的变量和环境变量。
接下来我们需要在本地环境登录Terraform Cloud，并添加相应的配置来重新初始化项目。
重新初始项目 完成了Terraform Cloud的账号注册之后，我们需要在本地终端运行 terraform login ，会打开浏览器来登录账号得到一个Token值，将其复制填入终端完成登录
> terrafrom login Terraform must now open a web browser to the tokens page for app.terraform.io. If a browser does not open this automatically, open the following URL to proceed: https://app.terraform.io/app/settings/tokens?source=terraform-login --------------------------------------------------------------------------------- Generate a token using your browser, and copy-paste it into this prompt.</p></div><div class=card-footer><span class=float-left>November 25, 2021</span>
<a href=/zh/posts/devops/tf-cloud/ class="float-right btn btn-outline-info btn-sm">Read</a></div></div></a></div><div class=post-card><a href=/zh/posts/opentool/rclone-sync/ class=post-card-link><div class=card><div class=card-head><img class=card-img-top src=/zh/posts/opentool/rclone-sync/rclone.webp alt="Hero Image"></div><div class=card-body><h5 class=card-title>RCLOUD与云存储同步</h5><p class="card-text post-summary">Rclone是一个命令行云存储同步工具，可以在文件系统和云存储服务之间或者多个云存储服务之间访问和同步文件，支持很多云存储服务后端。
Rclone支持的云存储服务 rclone的当前版本为v1.49.1，支持以下云存储服务：
1Fichier Alibaba Cloud (Aliyun) Object Storage System (OSS) Amazon Drive (See note) Amazon S3 Backblaze B2 Box Ceph C14 DigitalOcean Spaces Dreamhost Dropbox FTP Google Cloud Storage Google Drive Google Photos HTTP Hubic Jottacloud IBM COS S3 Koofr Memset Memstore Mega Microsoft Azure Blob Storage Microsoft OneDrive Minio Nextcloud OVH OpenDrive Openstack Swift Oracle Cloud Storage ownCloud pCloud premiumize.me put.io QingStor Rackspace Cloud Files rsync.net Scaleway SFTP Wasabi WebDAV Yandex Disk The local filesystem 当前对于Google Photos的支持有一定的限制，具体请看文档。</p></div><div class=card-footer><span class=float-left>August 30, 2019</span>
<a href=/zh/posts/opentool/rclone-sync/ class="float-right btn btn-outline-info btn-sm">Read</a></div></div></a></div></div><div class=paginator></div></div></section></div><footer id=footer class="container-fluid text-center align-content-center footer pb-2"><div class="container pt-5"><div class="row text-left"><div class="col-md-4 col-sm-12"><h5>Navigation</h5><ul><li class=nav-item><a class=smooth-scroll href=/zh/#about>关于</a></li><li class=nav-item><a class=smooth-scroll href=/zh/#skills>技能</a></li><li class=nav-item><a class=smooth-scroll href=/zh/#experiences>工作经历</a></li><li class=nav-item><a class=smooth-scroll href=/zh/#education>教育</a></li><li class=nav-item><a class=smooth-scroll href=/zh/#recent-posts>近期文章</a></li><li class=nav-item><a class=smooth-scroll href=/zh/#accomplishments>技能学习</a></li><li class=nav-item><a class=smooth-scroll href=https://live.mengz.dev/>LiveTerm</a></li></ul></div><div class="col-md-4 col-sm-12"><h5>Contact me:</h5><ul><li><a href=mailto:mengz.you@outlook.com target=_blank rel=noopener><span><i class="fas fa-envelope"></i></span> <span>mengz.you@outlook.com</span></a></li><li><a href=https://github.com/mengzyou target=_blank rel=noopener><span><i class="fab fa-github"></i></span> <span>mengzyou</span></a></li><li><a href=https://www.linkedin.com/in/mengzyou target=_blank rel=noopener><span><i class="fab fa-linkedin"></i></span> <span>You Mengzhe</span></a></li></ul></div></div></div><hr><div class=container><div class="row text-left"><div class=col-md-4><a id=theme href=https://github.com/hugo-toha/toha target=_blank rel=noopener><img src=/images/theme-logo_hu8376fd15465fef26ffe66b6bcf0ca686_13669_32x0_resize_box_3.png alt="Toha Theme Logo">
Toha</a></div><div class="col-md-4 text-center">© 2023 Copyright.</div><div class="col-md-4 text-right"><a id=hugo href=https://gohugo.io/ target=_blank rel=noopener>Powered by
<img src=/images/hugo-logo.svg alt="Hugo Logo" height=18></a></div></div></div></footer><script src=/application.3f98eac98ee0e5efd906fd54a896210d7d275efa5f73c9f8712612a554846688.js integrity="sha256-P5jqyY7g5e/ZBv1UqJYhDX0nXvpfc8n4cSYSpVSEZog=" defer></script><script src=https://storage.ko-fi.com/cdn/scripts/overlay-widget.js></script><script>kofiWidgetOverlay.draw("mengz",{type:"floating-chat","floating-chat.donateButton.text":"Buy me a book","floating-chat.donateButton.text-color":"#f9fafc","floating-chat.donateButton.background-color":"#248aaa"})</script></body></html>