<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Wechat on Mengz's Space ...</title><link>/zh/tags/wechat/</link><description>Recent content in Wechat on Mengz's Space ...</description><generator>Hugo -- gohugo.io</generator><language>zh</language><lastBuildDate>Tue, 25 Feb 2020 13:36:58 +0800</lastBuildDate><atom:link href="/zh/tags/wechat/index.xml" rel="self" type="application/rss+xml"/><item><title>DOCKER运行微信桌面客户端</title><link>/zh/posts/container-tech/docker-wechat/</link><pubDate>Tue, 25 Feb 2020 13:36:58 +0800</pubDate><guid>/zh/posts/container-tech/docker-wechat/</guid><description>今天借助Github用户huan的盒装微信项目，在我的openSUSE Leap系统上使用Docker成功地运行封装的Windows上的微信客户端。
安装Docker 在Linux系统上安装Docker引擎是很容器的，请参考Docker入门，如果你也使用的是openSUSE Leap，执行如下命令安装Docker引擎:
$ sudo zypper ref $ sudo zypper in docker 启动微信客户端 注意： 在启动之前，需要设置主机系统的X服务的访问控制，使用如下的命令禁用主机上X服务的访问控制，允许所有客户端链接服务：
$ xhost + 关于[xhost]的更多信息，可参考(https://www.computerhope.com/unix/xhost.htm)。
huan/docker-wechat提供了一个启动脚本dochat.sh来执行容器镜像的下载，以及启动，可直接执行如下操作：
$ curl -sL https://raw.githubusercontent.com/huan/docker-wechat/master/dochat.sh | bash 当然也可以克隆Git代码库，然后执行dochat.sh脚本。
成功启动后如下图所示，使用手机扫描登录。
使用Docker Compose启动 dochat.sh是直接使用了docker run命令启动容器，也可以编写一个compose文件来使用docker-compose管理应用容器。例如我在目录 ~/dockerapp/ 下创建了一个 dochat.yml 文件。
version: &amp;#39;2.4&amp;#39; services: dochat: image: zixia/wechat container_name: dockerapps_dochat network_mode: bridge devices: - &amp;#34;/dev/video0:/dev/video0&amp;#34; - &amp;#34;/dev/snd:/dev/snd&amp;#34; volumes: - &amp;#34;/etc/localtime:/etc/localtime:ro&amp;#34; - &amp;#34;$HOME/.dochat/appdata:/home/user/.wine/drive_c/user/Application Data/&amp;#34; - &amp;#34;$HOME/.dochat/wechatfiles:/home/user/WeChat Files/&amp;#34; - &amp;#34;/tmp/.X11-unix:/tmp/.X11-unix&amp;#34; environment: - &amp;#34;DISPLAY=unix$DISPLAY&amp;#34; - &amp;#34;XMODIFIERS=@im=fcitx&amp;#34; - &amp;#34;GTK_IM_MODULE=fcitx&amp;#34; - &amp;#34;QT_IM_MODULE=fcitx&amp;#34; - &amp;#34;AUDIO_GID=492&amp;#34; - &amp;#34;VIDEO_GID=484&amp;#34; - &amp;#34;GID=100&amp;#34; - &amp;#34;UID=1000&amp;#34; - &amp;#34;DOCHAT_DEBUG=true&amp;#34; ipc: host privileged: true 首次启动时使用命令docker-compose -f ~/dockerapp/dochat.</description></item></channel></rss>